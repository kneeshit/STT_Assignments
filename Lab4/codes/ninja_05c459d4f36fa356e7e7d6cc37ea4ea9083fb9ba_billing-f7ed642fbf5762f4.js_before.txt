(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3224],{15347:function(e,i,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/billing",function(){return n(14091)}])},43267:function(e,i,n){"use strict";n.r(i),n.d(i,{default:function(){return w}});var a=n(39324),t=n(4337),s=n(35250),r=n(6038),o=n(52696),l=n(80479),c=n(15329),d=n(1821),u=n(82277),m=n(13090),f=n(32877),g=n(78931),x=n(16266),v=n(77311),p=n(19841),h=n(60554),j=n(70079),N=n(1454),y=n(32004),b=n(94968);function _(){var e=(0,t._)(["max-w-5xl mx-auto w-full"]);return _=function(){return e},e}function k(e){var i=e.route,n=e.children,a=(0,h.useRouter)();return(0,s.jsx)(c.ZB,{$as:"button",className:(0,p.default)("rounded",a.route!==i&&"hover:bg-token-surface-secondary dark:hover:bg-gray-800"),onClick:function(){a.push(i)},children:n})}function I(e){var i=e.workspaceName,n=e.hasAdminPrivileges,t=e.hasOwnerPrivileges,o=(0,g.hz)(),l=(0,h.useRouter)(),c=(0,j.useCallback)(function(){l.push("/")},[l]);return(0,s.jsxs)("nav",{className:"p-2",children:[(0,s.jsxs)("div",{className:"mb-1 flex flex-row gap-2",children:[(0,s.jsxs)(m.MP,{onClick:c,children:[(0,s.jsx)(N.Ao2,{className:"icon-sm"}),(0,s.jsx)(y.Z,(0,a._)({},P.backToChat))]}),(0,s.jsx)(m.H,{})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 py-2",children:[(0,s.jsxs)("div",{className:"my-2 flex flex-col gap-2 px-2",children:[(0,s.jsx)(r.B0,{size:"large"}),(0,s.jsx)("h2",{className:"text-lg text-token-text-primary dark:text-white",children:i})]}),(0,s.jsxs)(k,{route:"/admin",children:[(0,s.jsx)(x.Z,{className:"icon-sm"}),(0,s.jsx)(y.Z,(0,a._)({},P.membersPageTitle))]}),n&&(0,s.jsxs)(k,{route:"/admin/analytics",children:[(0,s.jsx)(N.orK,{className:"icon-sm"}),(0,s.jsx)(y.Z,(0,a._)({},P.analytics))]}),t&&(0,s.jsxs)(k,{route:"/admin/billing",children:[(0,s.jsx)(N.XiQ,{className:"icon-sm"}),(0,s.jsx)(y.Z,(0,a._)({},P.billing))]}),t&&o.has(f.L0.WorkspaceAdminSettings)&&(0,s.jsxs)(k,{route:"/admin/settings",children:[(0,s.jsx)(N.nbt,{className:"icon-sm"}),(0,s.jsx)(y.Z,(0,a._)({},P.settings))]}),t&&(0,s.jsxs)(k,{route:"/admin/identity",children:[(0,s.jsx)(v.Z,{className:"icon-sm"}),(0,s.jsx)(y.Z,(0,a._)({},P.identity))]})]})]})}function w(e){var i=e.mobilePageTitle,n=e.requireAdminPrivileges,t=void 0!==n&&n,r=e.children,c=(0,g.ec)(function(e){return e.currentWorkspace}),m=(0,g.$T)(),f=(0,o.Ix)(c),x=(0,h.useRouter)(),v=null!=c?(0,l.$v)(c.role):void 0,p=null!=c?(0,l.Di)(c.role):void 0;return(0,j.useEffect)(function(){t&&!1===v&&x.push("/admin")},[t,v,x]),(0,s.jsx)(u.Z,{showNavigation:!0,renderTitle:i,renderSidebar:(0,s.jsx)(I,{workspaceName:m?"":f,hasAdminPrivileges:v,hasOwnerPrivileges:p}),children:(0,s.jsxs)(M,{children:[m&&(0,s.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,s.jsx)(d.Z,{})}),!m&&!c&&(0,s.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,s.jsx)(y.Z,(0,a._)({},P.workspaceNotFound))}),!m&&c&&r]})})}var M=n(21389).Z.div(_()),P=(0,b.vU)({workspaceNotFound:{id:"adminPage.workspaceNotFound",defaultMessage:"Workspace not found",description:"The title of the admin page."},backToChat:{id:"adminPage.backToChat",defaultMessage:"Back to chat",description:"Navigation button to return to main chat page"},membersPageTitle:{id:"adminPage.membersPageTitle",defaultMessage:"Members",description:"The title of the members page"},analytics:{id:"adminPage.analytics",defaultMessage:"Analytics",description:"Analytics sidebar item"},billing:{id:"adminPage.billing",defaultMessage:"Billing Info",description:"Billing sidebar item"},settings:{id:"adminPage.Settings",defaultMessage:"Settings",description:"Settings sidebar item"},identity:{id:"adminPage.identity",defaultMessage:"Identity & Provisioning",description:"Identity sidebar item"}})},14091:function(e,i,n){"use strict";n.r(i),n.d(i,{__N_SSP:function(){return z},default:function(){return T}});var a=n(35250),t=n(21722),s=n(39324),r=n(71209),o=n(22830),l=n(38104),c=n(95137),d=n(78931),u=n(5268),m=n(19841),f=n(70079),g=n(1454),x=n(70671),v=n(32004),p=n(94968),h=n(1821),j=n(88798);function N(e){return y.apply(this,arguments)}function y(){return(y=(0,t._)(function(e){var i,n,a,t;return(0,l.Jh)(this,function(s){return(i=(0,o._)(e.queryKey,2))[0],a=(n=i[1]).organizationId,t=n.intl,[2,c.ZP.getOrganizationSubscription(a).catch(function(e){j.m.danger(t.formatMessage(P.subscriptionLoadError,{error:e.message}))})]})})).apply(this,arguments)}function b(e){return _.apply(this,arguments)}function _(){return(_=(0,t._)(function(e){var i,n,a,t,s;return(0,l.Jh)(this,function(r){return(i=(0,o._)(e.queryKey,2))[0],a=(n=i[1]).organizationId,t=n.options,s=n.intl,[2,c.ZP.getOrganizationInvoices(a,t).catch(function(e){j.m.danger(s.formatMessage(P.invoicesLoadError,{error:e.message}))})]})})).apply(this,arguments)}function k(e){var i,n,t=(i=e.organizationId,n=(0,x.Z)(),(0,u.a)(["organization-subscription",{organizationId:i,intl:n}],N)),o=t.data,l=(0,x.Z)();if(t.isError)return null;if(!o)return(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,a.jsx)(h.Z,{})});var c=null!=o.active_until,d=l.formatNumber(o.seats_in_use/o.seats_entitled,{style:"percent",maximumFractionDigits:1});return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"m-4 border-t border-gray-50 dark:border-gray-700"}),(0,a.jsxs)("div",{className:"flex flex-col rounded-xl border-t border-gray-50 bg-gray-50 px-4 py-2 text-gray-900 dark:border-gray-700 dark:bg-gray-700",children:[(0,a.jsx)("div",{className:"m-1 mb-6 text-sm font-light text-token-text-primary",children:(0,a.jsx)(v.Z,(0,s._)({},P.planTitle))}),(0,a.jsx)("div",{className:"m-2 flex",children:(0,a.jsx)("div",{className:"flex flex-col rounded-lg bg-gray-100 px-4 py-3 text-sm text-gray-900 dark:bg-gray-600 dark:text-gray-100",children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-base font-medium",children:(0,a.jsx)(v.Z,(0,s._)({},P.activeLicense))}),(0,a.jsx)("div",{className:"text-sm font-light text-gray-500",children:(0,a.jsx)(v.Z,(0,r._)((0,s._)({},P.activeLicenseSeats),{values:{numSeats:o.seats_entitled}}))})]}):(0,a.jsx)(v.Z,(0,s._)({},P.inactiveLicense))})}),null!=o.active_until&&(0,a.jsx)("ul",{className:"text list-inside list-disc text-gray-600 dark:text-gray-200",children:(0,a.jsx)("li",{children:(0,a.jsx)(v.Z,(0,r._)((0,s._)({},P.licenseExpiry),{values:{expiryDate:new Date(o.active_until)}}))})})]}),c&&(0,a.jsxs)("div",{className:"m-4 border-t border-gray-50 dark:border-gray-700",children:[(0,a.jsx)("div",{className:"my-4 text-sm font-light text-gray-600 dark:text-gray-300",children:(0,a.jsx)(v.Z,(0,s._)({},P.seatsTitle))}),(0,a.jsxs)("div",{className:"my-6",children:[(0,a.jsx)("div",{className:"h-2.5 w-full rounded-full bg-gray-100 dark:bg-gray-700",children:(0,a.jsx)("div",{className:"h-full rounded-full bg-black dark:bg-gray-100",style:{width:d}})}),(0,a.jsxs)("div",{className:"mt-2 flex justify-between text-sm",children:[(0,a.jsx)("span",{children:(0,a.jsx)(v.Z,(0,r._)((0,s._)({},P.seatsInUse),{values:{numSeats:(0,a.jsx)("span",{className:"font-semibold",children:(0,a.jsx)(p.BK,{value:o.seats_in_use})}),numSeatsPct:d}}))}),(0,a.jsx)("span",{className:"text-gray-500",children:(0,a.jsx)(p.BK,{value:o.seats_entitled})})]})]})]})]})}function I(e){var i=e.invoice,n=(null==i?void 0:i.status_transitions.paid_at)!=null&&new Date(1e3*i.status_transitions.paid_at),t=i&&new Date(1e3*i.due_date),o=i&&new Date(1e3*i.created);return(0,a.jsxs)("div",{className:"my-4 flex rounded-xl border p-2 dark:border-gray-600",children:[(0,a.jsx)("div",{className:"m-4",children:i?(0,a.jsx)(g.tHe,{className:"icon-xl mx-auto"}):(0,a.jsx)(h.Z,{})}),(0,a.jsxs)("div",{className:"my-2 flex flex-col",children:[(0,a.jsx)("div",{className:"my-1 font-light",children:o?(0,a.jsx)(v.Z,(0,r._)((0,s._)({},P.invoiceName),{values:{createdDate:o}})):(0,a.jsx)(v.Z,(0,s._)({},P.defaultInvoiceName))}),(null==i?void 0:i.paid)&&null!=n?(0,a.jsx)("div",{className:"text-xs text-gray-500",children:(0,a.jsx)(v.Z,(0,r._)((0,s._)({},P.paidInvoice),{values:{invoiceDate:n}}))}):i&&(0,a.jsx)("div",{className:"text-xs text-green-500",children:(0,a.jsx)(v.Z,(0,r._)((0,s._)({},P.upcomingInvoice),{values:{invoiceDate:t}}))})]}),(0,a.jsx)("div",{className:"flex-grow"}),(0,a.jsx)("div",{className:"m-4",children:(0,a.jsx)("a",{href:null==i?void 0:i.hosted_invoice_url,className:(0,m.default)("mx-auto",(null==i?void 0:i.hosted_invoice_url)==void 0&&"cursor-not-allowed opacity-20"),target:"_blank",rel:"noreferrer",children:(0,a.jsx)(g.AlO,{className:"icon-xl"})})})]})}function w(e){var i,n,t=e.organizationId,l=(0,o._)((0,f.useState)({limit:5}),2),c=l[0],d=l[1],m=(i=(0,x.Z)(),(0,u.a)(["organization-invoices",{organizationId:t,options:c,intl:i}],b)),p=m.data,h=null!=c.startingAfter||null!=c.endingBefore&&(null==p?void 0:p.has_more),j=null!=c.endingBefore||(null==p?void 0:p.has_more)&&null==c.endingBefore;return(0,a.jsxs)("div",{className:"m-4 border-t border-gray-50 dark:border-gray-700",children:[(0,a.jsx)("div",{className:"my-6 text-sm font-light text-gray-600 dark:text-gray-300",children:(0,a.jsx)(v.Z,(0,s._)({},P.invoicesTitle))}),m.isError?null:null!=p?p.data.map(function(e){return(0,a.jsx)(I,{invoice:e},e.id)}):Array(null!==(n=c.limit)&&void 0!==n?n:3).fill(0).map(function(e,i){return(0,a.jsx)(I,{},i)}),(0,a.jsxs)("div",{className:"flex",children:[h&&(0,a.jsx)("button",{onClick:function(){p&&d(function(e){return(0,r._)((0,s._)({},e),{endingBefore:p.data[0].id,startingAfter:void 0})})},children:(0,a.jsx)(g.YFh,{className:"icon-sm"})}),(0,a.jsx)("div",{className:"flex-grow"}),j&&(0,a.jsx)("button",{onClick:function(){p&&d(function(e){return(0,r._)((0,s._)({},e),{startingAfter:p.data[p.data.length-1].id,endingBefore:void 0})})},children:(0,a.jsx)(g.Tfp,{className:"icon-sm"})})]})]})}function M(){var e=(0,d.ec)(function(e){return e.currentWorkspace}),i=null==e?void 0:e.organizationId;return void 0===i?null:(0,a.jsxs)("div",{className:"mx-auto max-w-lg py-12",children:[(0,a.jsx)("div",{className:"my-12 text-center text-2xl font-medium text-token-text-primary",children:(0,a.jsx)(v.Z,(0,s._)({},P.title))}),(0,a.jsx)(k,{organizationId:i}),(0,a.jsx)(w,{organizationId:i})]})}var P=(0,p.vU)({title:{id:"organizationBillingInfo.title",defaultMessage:"ChatGPT Enterprise",description:"Title for the organization billing info page"},planTitle:{id:"organizationBillingInfo.planTitle",defaultMessage:"Plan",description:"Title for the organization billing plan"},activeLicense:{id:"organizationBillingInfo.activeLicense",defaultMessage:"Enterprise License",description:"Active enterprise license name"},activeLicenseSeats:{id:"organizationBillingInfo.activeLicenseSeats",defaultMessage:"{numSeats, plural, =0 {No seats} one {# seat} other {# seats}}",description:"Active enterprise license seats"},inactiveLicense:{id:"organizationBillingInfo.inactiveLicense",defaultMessage:"Inactive License",description:"Inactive enterprise license name"},licenseExpiry:{id:"organizationBillingInfo.licenseExpiry",defaultMessage:"Active until {expiryDate, date, long}",description:"License expiry date"},seatsTitle:{id:"organizationBillingInfo.seatsTitle",defaultMessage:"Seats",description:"Title for the organization billing seats"},seatsInUse:{id:"organizationBillingInfo.seatsInUse",defaultMessage:"{numSeats} in use ({numSeatsPct})",description:"Number of enterprise seats in use"},invoicesTitle:{id:"organizationBillingInfo.invoicesTitle",defaultMessage:"Invoices",description:"Title for the organization invoices"},invoiceName:{id:"organizationBillingInfo.invoiceName",defaultMessage:"Invoice: {createdDate, date, long}",description:"Enterprise invoice name"},defaultInvoiceName:{id:"organizationBillingInfo.defaultInvoiceName",defaultMessage:"Invoice",description:"Enterprise invoice name when we are missing dates"},paidInvoice:{id:"organizationBillingInfo.paidInvoice",defaultMessage:"Paid: {invoiceDate, date, long}",description:"Paid invoice date"},upcomingInvoice:{id:"organizationBillingInfo.upcomingInvoice",defaultMessage:"Due: {invoiceDate, date, long}",description:"Upcoming invoice date"},invoicesLoadError:{id:"organizationBillingInfo.invoicesLoadError",defaultMessage:"Failed to load invoices: {error}. Contact support@openai.com if error persists.",description:"Error message when invoices fail to load"},subscriptionLoadError:{id:"organizationBillingInfo.subscriptionLoadError",defaultMessage:"Failed to load subscription: {error}. Contact support@openai.com if error persists.",description:"Error message when subscription fails to load"}}),Z=n(43267),z=!0;function T(){return(0,a.jsx)(M,{})}T.getLayout=function(e){return(0,a.jsx)(Z.default,{mobilePageTitle:"Billing Info",requireAdminPrivileges:!0,children:e})}},52696:function(e,i,n){"use strict";n.d(i,{$3:function(){return m},Ap:function(){return c},CV:function(){return f},GA:function(){return u},Gk:function(){return p},Ix:function(){return x},_O:function(){return v},bE:function(){return h},cI:function(){return g},qH:function(){return d}});var a=n(96237),t=n(75641),s=n(78931),r=n(62509),o=n(70079),l=n(70671);function c(){var e=(0,l.Z)(),i=e.formatMessage(j.adminRoleName),n=e.formatMessage(j.ownerRoleName),s=e.formatMessage(j.standardRoleName);return(0,o.useMemo)(function(){var e;return e={},(0,a._)(e,t.r3.OWNER,n),(0,a._)(e,t.r3.ADMIN,i),(0,a._)(e,t.r3.STANDARD,s),e},[n,i,s])}function d(e){var i=(0,l.Z)();return e?e.structure===t.CZ.PERSONAL?i.formatMessage(j.personalPlanName):i.formatMessage(j.enterprisePlanName):i.formatMessage(j.personalPlanName)}function u(e){return f((0,l.Z)(),e)}function m(){var e=(0,s.ec)(function(e){return e.currentWorkspace});return f((0,l.Z)(),e)}function f(e,i){var n;return i&&i.structure!==t.CZ.PERSONAL?null!==(n=i.name)&&void 0!==n?n:e.formatMessage(j.defaultWorkspaceTitle):e.formatMessage(j.personalWorkspaceTitle)}function g(){var e,i,n,a,t=(0,r.kP)().session;return null!==(a=null!==(n=null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.name)&&void 0!==n?n:null==t?void 0:null===(i=t.user)||void 0===i?void 0:i.email)&&void 0!==a?a:null}function x(e){var i=(0,s.ec)(function(e){return e.currentWorkspace}),n=(0,s.ec)(s.F_.isPersonalWorkspace),a=(0,s.$T)(),r=u(i),o=g();return e&&!a?e.structure===t.CZ.PERSONAL?o:e.name:i?n?o:r:o}function v(){return(0,s.ec)(function(e){return e.workspaces})}function p(e){var i=v().find(function(i){return i.id===e});return(null==i?void 0:i.role)===t.r3.OWNER}function h(e){var i=v().find(function(i){return i.id===e});return(null==i?void 0:i.role)===t.r3.ADMIN}var j=(0,n(94968).vU)({defaultWorkspaceTitle:{id:"useWorkspaces.defaultWorkspaceTitle",defaultMessage:"Untitled Workspace",description:"title for workspace without a name"},personalWorkspaceTitle:{id:"useWorkspaces.personalWorkspaceTitle",defaultMessage:"Personal account",description:"title for personal workspace"},personalPlanName:{id:"useWorkspaces.personalPlanName",defaultMessage:"Personal",description:"label for personal tier account"},enterprisePlanName:{id:"useWorkspaces.enterprisePlanName",defaultMessage:"Enterprise",description:"label for enterprise tier account"},adminRoleName:{id:"useWorkspaces.adminRoleName",defaultMessage:"Admin",description:"Role name for an admin user"},ownerRoleName:{id:"useWorkspaces.ownerRoleName",defaultMessage:"Owner",description:"Role name for an owner user"},standardRoleName:{id:"useWorkspacews.standardRoleName",defaultMessage:"Member",description:"Role name for a standard user"}})},16266:function(e,i,n){"use strict";var a=n(70079);let t=a.forwardRef(function({title:e,titleId:i,...n},t){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:t,"aria-labelledby":i},n),e?a.createElement("title",{id:i},e):null,a.createElement("path",{fillRule:"evenodd",d:"M18.685 19.097A9.723 9.723 0 0021.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 003.065 7.097A9.716 9.716 0 0012 21.75a9.716 9.716 0 006.685-2.653zm-12.54-1.285A7.486 7.486 0 0112 15a7.486 7.486 0 015.855 2.812A8.224 8.224 0 0112 20.25a8.224 8.224 0 01-5.855-2.438zM15.75 9a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z",clipRule:"evenodd"}))});i.Z=t}},function(e){e.O(0,[2104,2277,9774,2888,179],function(){return e(e.s=15347)}),_N_E=e.O()}]);