diff --git a/openai/Cargo.toml b/openai/Cargo.toml
index 455d3f9..017db83 100644
--- a/openai/Cargo.toml
+++ b/openai/Cargo.toml
@@ -62,19 +62,19 @@ async-stream = { version = "0.3.5", optional = true }
 serde_with = "3.3.0"
 
 # mitm
-rcgen = { version = "0.10", features = ["x509-parser"] }
-moka = { version = "0.11", features = ["future"] }
-hyper = { version = "0.14.27", features = ["http1", "http2", "server", "stream", "tcp", "runtime"]  }
-hyper-proxy = { version = "0.9.1" }
-hyper-rustls = { version = "0.24.1" }
-hyper-tls = { version = "0.5" }
-tokio-rustls = { version = "0.24", default-features = false, features = ["tls12"] }
-rustls = { version = "0.21", features = ["dangerous_configuration"] }
-wildmatch = "2.1"
-cfg-if = "1"
-http = "0.2"
-pin-project = "1"
-byteorder = "1.4"
+rcgen = { version = "0.10", features = ["x509-parser"], optional = true }
+moka = { version = "0.11", features = ["future"], optional = true }
+hyper = { version = "0.14.27", features = ["http1", "http2", "server", "stream", "tcp", "runtime"], optional = true }
+hyper-proxy = { version = "0.9.1", optional = true }
+hyper-rustls = { version = "0.24.1", optional = true }
+hyper-tls = { version = "0.5", optional = true }
+tokio-rustls = { version = "0.24", default-features = false, features = ["tls12"], optional = true }
+rustls = { version = "0.21", features = ["dangerous_configuration"], optional = true }
+wildmatch = { version = "2.1", optional = true }
+cfg-if = { version = "1.0.0", optional = true }
+http = { version = "0.2", optional = true }
+pin-project = { version = "1", optional = true }
+byteorder = { version = "1.4", optional = true }
 
 [target.'cfg(windows)'.dependencies.windows-sys]
 version = "0.48.0"
@@ -87,6 +87,7 @@ static-files = "0.2.3"
 [features]
 default = ["serve", "limit", "template"]
 api = ["stream"]
+preauth = ["dep:rcgen", "dep:moka", "dep:hyper", "dep:hyper-proxy", "dep:hyper-rustls", "dep:hyper-tls", "dep:tokio-rustls", "dep:rustls", "dep:wildmatch", "dep:cfg-if", "dep:http", "dep:pin-project", "dep:byteorder"]
 serve = ["stream", "dep:async-stream", "dep:tracing", "dep:tracing-subscriber", "dep:tower-http", "dep:tower", "dep:bytes", "dep:time", "dep:axum-server", "dep:axum-extra", "dep:axum", "dep:static-files", "dep:futures-core", "dep:tera"]
 stream = ["dep:tokio-util", "dep:futures", "dep:tokio-stream", "dep:eventsource-stream", "dep:futures-core", "dep:pin-project-lite", "dep:nom", "dep:mime", "dep:futures-timer"]
 remote-token = []
