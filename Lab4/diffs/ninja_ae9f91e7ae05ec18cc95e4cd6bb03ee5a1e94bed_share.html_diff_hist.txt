diff --git a/openai/templates/share.html b/openai/templates/share.html
index 0b17772..24aaf52 100644
--- a/openai/templates/share.html
+++ b/openai/templates/share.html
@@ -25,7 +25,13 @@
     <link rel="preload" href="/_next/static/css/df35a37d1f08004f.css" as="style" />
     <link rel="stylesheet" href="/_next/static/css/df35a37d1f08004f.css" data-n-g="" /><noscript
         data-n-css=""></noscript>
-    <script>window.__pandora_sentry = {{ pandora_sentry | lower }}; window.__api_prefix = '/'; window.onerror = function () { return !0; };</script>
+    <script>
+            {% if api_prefix is defined and api_prefix != "" %}
+                window.__api_prefix = {{ api_prefix|safe }};
+            {% else %}
+                window.__api_prefix = window.location.origin;
+            {% endif %}
+     window.onerror = function () { return !0; };</script>
     <script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script>
     <script src="/_next/static/chunks/webpack-c08a82b5c21eeb39.js" defer=""></script>
     <script src="/_next/static/chunks/framework-e23f030857e925d4.js" defer=""></script>
@@ -48,7 +54,7 @@
         <script>!function () { try { var d = document.documentElement, c = d.classList; c.remove('light', 'dark'); var e = localStorage.getItem('theme'); if ('system' === e || (!e && true)) { var t = '(prefers-color-scheme: dark)', m = window.matchMedia(t); if (m.media !== t || m.matches) { d.style.colorScheme = 'dark'; c.add('dark') } else { d.style.colorScheme = 'light'; c.add('light') } } else if (e) { c.add(e || '') } if (e === 'light' || e === 'dark') d.style.colorScheme = e } catch (e) { } }()</script>
         <div class="absolute left-0 right-0 top-0 z-[2]"></div>
     </div>
-    <script id="__NEXT_DATA__" type="application/json">{{props|json_encode(pretty=true)|safe}}</script>
+    <script id="__NEXT_DATA__" type="application/json">{{props|safe}}</script>
     <script>if ('serviceWorker' in navigator) { window.addEventListener('load', function () { navigator.serviceWorker.register('/service-worker.js', { scope: '/' }).then(function (reg) { console.log('ServiceWorker registration successful with scope: ', reg.scope); }, function (e) { console.log('ServiceWorker registration failed: ', e); }); }); }</script>
 </body>
 
