@@ -8,6 +8,7 @@
     :copyright: (c) 2010 by Armin Ronacher.
     :license: BSD, see LICENSE for more details.
 """
+import os
 import minitwit
 import unittest
 import tempfile
@@ -17,11 +18,15 @@ class MiniTwitTestCase(unittest.TestCase):
 
     def setUp(self):
         """Before each test, set up a blank database"""
-        self.db = tempfile.NamedTemporaryFile()
+        self.db_fd, minitwit.DATABASE = tempfile.mkstemp()
         self.app = minitwit.app.test_client()
-        minitwit.DATABASE = self.db.name
         minitwit.init_db()
 
+    def tearDown(self):
+        """Get rid of the database again after each test."""
+        os.close(self.db_fd)
+        os.unlink(minitwit.DATABASE)
+
     # helper functions
 
     def register(self, username, password, password2=None, email=None):
